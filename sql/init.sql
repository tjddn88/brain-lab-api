-- BrainHub DB 초기화 스크립트 (Supabase SQL Editor에서 실행)

-- 1. 테이블 생성
CREATE TABLE IF NOT EXISTS questions (
    id BIGSERIAL PRIMARY KEY,
    content TEXT NOT NULL,
    options TEXT NOT NULL,
    answer INT NOT NULL,
    difficulty INT NOT NULL,
    order_num INT NOT NULL,
    category VARCHAR(20) NOT NULL,
    correct_count INT NOT NULL DEFAULT 0,
    total_attempts INT NOT NULL DEFAULT 0
);

CREATE TABLE IF NOT EXISTS test_results (
    id BIGSERIAL PRIMARY KEY,
    nickname VARCHAR(20) NOT NULL,
    score INT NOT NULL,
    correct_count INT NOT NULL,
    time_seconds INT NOT NULL,
    estimated_iq INT NOT NULL,
    ip_address VARCHAR(45) NOT NULL,
    created_at TIMESTAMPTZ NOT NULL DEFAULT now()
);

-- 2. 문제 초기화 (기존 데이터 삭제 후 재삽입)
TRUNCATE TABLE questions RESTART IDENTITY;

-- answer: 0-based 인덱스 (①=0, ②=1, ③=2, ④=3)
INSERT INTO questions (content, options, answer, difficulty, order_num, category) VALUES

-- [카테고리 1] 수리 논리 (패턴 및 수열)
('다음 빈칸에 들어갈 숫자는? (2, 4, 8, 16, ?)',
 '["24","30","32","64"]', 2, 1, 1, '수리논리'),

('다음 수열의 규칙을 찾으세요. (1, 4, 9, 16, ?)',
 '["20","24","25","30"]', 2, 1, 2, '수리논리'),

('다음 중 성격이 다른 숫자는? (2, 3, 5, 7, 9)',
 '["3","5","7","9"]', 3, 2, 3, '수리논리'),

('다음 빈칸의 숫자는? (100, 95, 85, 70, ?)',
 '["50","55","60","65"]', 0, 2, 4, '수리논리'),

('다음 피보나치 수열의 빈칸은? (1, 1, 2, 3, 5, 8, ?)',
 '["10","12","13","15"]', 2, 2, 5, '수리논리'),

('숫자의 나열 규칙을 보세요. (8, 4, 2, 1, ?)',
 '["0","0.5","-1","-2"]', 1, 1, 6, '수리논리'),

-- [카테고리 2] 언어 유추 (관계 파악)
('[손 : 장갑]의 관계와 같은 것은? [발 : ?]',
 '["신발","바지","양말","모자"]', 2, 1, 7, '언어유추'),

('[낮 : 해]의 관계와 같은 것은? [밤 : ?]',
 '["별","달","어둠","잠"]', 1, 1, 8, '언어유추'),

('[작가 : 책]의 관계와 같은 것은? [화가 : ?]',
 '["붓","전시회","도화지","그림"]', 3, 1, 9, '언어유추'),

('[서울 : 한국]의 관계와 같은 것은? [도쿄 : ?]',
 '["일본","중국","아시아","도시"]', 0, 1, 10, '언어유추'),

('[뜨겁다 : 차갑다]의 관계와 같은 것은? [높다 : ?]',
 '["깊다","넓다","낮다","멀다"]', 2, 1, 11, '언어유추'),

('[시계 : 시간]의 관계와 같은 것은? [저울 : ?]',
 '["부피","무게","길이","온도"]', 1, 1, 12, '언어유추'),

-- [카테고리 3] 인지 반사 (직관적 함정)
('달리기 경주에서 2등을 추월했다면 당신은 몇 등입니까?',
 '["1등","2등","3등","4등"]', 1, 1, 13, '인지반사'),

('연꽃이 매일 2배로 늘어납니다. 호수를 다 덮는 데 48일이 걸렸다면, 절반을 덮는 데는 며칠이 걸렸을까요?',
 '["24일","46일","47일","48일"]', 2, 3, 14, '인지반사'),

('의사가 알약 3개를 주며 30분마다 하나씩 먹으라고 했습니다. 약을 다 먹는 데 몇 분이 걸릴까요?',
 '["30분","60분","90분","120분"]', 1, 2, 15, '인지반사'),

('1년 중 28일이 들어있는 달은 총 몇 개입니까?',
 '["1개","6개","11개","12개"]', 3, 1, 16, '인지반사'),

('방망이와 공의 합계는 1,100원입니다. 방망이가 공보다 1,000원 더 비싸다면 공은 얼마입니까?',
 '["100원","50원","10원","5원"]', 1, 3, 17, '인지반사'),

('기계 5대가 물건 5개를 만드는 데 5분이 걸립니다. 기계 100대가 물건 100개를 만드는 데는 몇 분이 걸릴까요?',
 '["1분","5분","100분","500분"]', 1, 2, 18, '인지반사'),

-- [카테고리 4] 공간/도형 직관 (머릿속 시뮬레이션)
('다음 도형 중 안과 밖의 경계가 없는 것은?',
 '["원","정육면체","뫼비우스의 띠","삼각형"]', 2, 3, 19, '공간도형'),

('종이 한 장을 세 번 반으로 접었습니다. 완전히 펼치면 종이는 몇 개의 구역으로 나뉩니까?',
 '["4개","6개","8개","16개"]', 2, 2, 20, '공간도형'),

('정육면체 주사위의 모든 모서리 개수는 총 몇 개입니까?',
 '["6개","8개","10개","12개"]', 3, 2, 21, '공간도형'),

('알파벳 M을 거울에 비춘 뒤 시계 방향으로 90도 돌리면 어떤 모양과 가장 비슷합니까?',
 '["W","3","E","M"]', 1, 2, 22, '공간도형'),

('동쪽을 보던 사람이 오른쪽으로 90도, 다시 뒤로 180도 돌았다면 현재 어느 방향을 보고 있습니까?',
 '["동쪽","서쪽","남쪽","북쪽"]', 3, 2, 23, '공간도형'),

('삼각형 내각의 총합은 몇 도입니까?',
 '["90도","180도","270도","360도"]', 1, 1, 24, '공간도형'),

-- [카테고리 5] 패턴 및 일반 논리
('다음 알파벳 나열의 빈칸은? (O, T, T, F, F, S, S, ?)',
 '["E","N","T","O"]', 0, 3, 25, '패턴논리'),

('다음 요일 패턴의 빈칸은? (월, 수, 금, ?)',
 '["토","일","화","목"]', 1, 1, 26, '패턴논리'),

('알파벳 패턴의 빈칸은? (A, C, E, G, ?)',
 '["H","I","J","K"]', 1, 1, 27, '패턴논리'),

('다음 중 숫자의 성격이 다른 하나는? (121, 144, 169, 190)',
 '["121","144","169","190"]', 3, 3, 28, '패턴논리'),

('성냥 하나를 가지고 어두운 방에 들어갔습니다. 촛불, 가스버너, 장작이 있을 때 가장 먼저 불을 붙여야 하는 것은?',
 '["촛불","가스버너","장작","성냥"]', 3, 1, 29, '패턴논리'),

('무지개 색깔 순서 중 노란색과 파란색 사이에 있는 색깔은?',
 '["주황","초록","남색","보라"]', 1, 1, 30, '패턴논리');
